h2= storyTitle
        ul 
        if errors 
            each error in errors 
                li= error
        ul
        if comments 
            each comment in comments 
                li= comment
        div(class="comment_container")
            form(class="comment_form" method="post")
                label(for="comment") Write comment 
                input(class="comment" type="text" name="comment")
                button(type="submit") Submit 

const edit = document.getElementById('edit');
            const remove = document.getElementById('delete');
            
            if (menu.classList.contains('.comments-container__comment-nav-menu-dropdown--hidden')) {
                const commentUserId = menu.getAttribute('title'); 
                const currentUserId = res.locals.user.id; 
                
                if (commentUserId === currentUserId) {
                    menu.classList.remove('.comments-container__comment-nav-menu-dropdown--hidden');
                    
                    remove.addEventListener('click', async (e) => {
                        const id = menu.getAttribute('id');
                        const body = { id }; 
                        try {
                            const res = await fetch(`http://localhost:8080/comments/${id}`, {
                                method: "DELETE", 
                                body: JSON.stringify(body),
                                headers: {
                                    "Content-Type": "application/json",
                                },
                            });
                            if (!res.ok) {
                                throw res; 
                            }
                            window.location.href = "/comments/";
                            } catch (err) {
                                alert("Something went wrong. Please try again!"); 
                            }
                    });                      
                }
                    
            }
                
                // edit.addEventListener('click', async (e) => {
                //     const id = menu.getAttribute('id'); 
                //     const formData = new FormData(respond); 
                //     const comment = formData.get("comment"); 
                //     const body = { comment }; 
                //     try {
                //         const res = await fetch(`http://localhost:8080/comments/${id}`, {
                //             method: "PUT", 
                //             body: JSON.stringify(body),
                //             headers: {
                //                 "Content-Type": "application/json",
                //             },
                //         }); 
                //         if (!res.ok) {
                //             throw res; 
                //         }
                //         window.location.href = "/comments/";
                //     } catch (err) {
                //         alert("Something went wrong. Please try again!"); 
                //     }
                // });



                router.get('/:id(\\d+)', asyncHandler(async (req, res) => {
    const commentId = parseInt(req.params.id, 10);
    const comment = await Comment.findByPk(commentId); 
    
    const userId = comment.userId; 
    const loggedInUser = comment.userId; //res.locals.user.id; 
    const authCompare = userId === loggedInUser;
      
    if (userId !== loggedInUser) {
        res.redirect('/comments/'); 
    }

    const storyId = comment.storyId; 
    const comments = await Comment.findAll({
        where: { storyId }, 
        order: [['createdAt', 'DESC']], 
    }); 

    comments.forEach(comment => {
        if (comment.userId === loggedInUser) {
            comment.authCompare = authCompare; 
        }
    });

    comments.forEach(comment => {
        if (comment.authCompare === true) {
            console.log(comment); 
        }
    })

    res.render('comments', {
        comments, 
    });        
}))